{"version":3,"file":"outputCssLoader.js","names":["outputCssLoader","async","cacheProvider","getOptions","cacheInstance","getCacheInstance","result","get","resourcePath","dependencies","getDependencies","forEach","dependency","addDependency","callback","err"],"sources":["../src/outputCssLoader.ts"],"sourcesContent":["import type webpack from 'webpack';\n\nimport type { ICache } from './cache';\nimport { getCacheInstance } from './cache';\n\nexport default async function outputCssLoader(\n  this: webpack.LoaderContext<{ cacheProvider: string | ICache | undefined }>\n) {\n  this.async();\n  const { cacheProvider } = this.getOptions();\n\n  try {\n    const cacheInstance = await getCacheInstance(cacheProvider);\n\n    const result = await cacheInstance.get(this.resourcePath);\n    const dependencies =\n      (await cacheInstance.getDependencies?.(this.resourcePath)) ?? [];\n\n    dependencies.forEach((dependency) => {\n      this.addDependency(dependency);\n    });\n\n    this.callback(null, result);\n  } catch (err) {\n    this.callback(err as Error);\n  }\n}\n"],"mappings":";;;;;;AAGA;AAEe,eAAeA,eAAe,GAE3C;EACA,IAAI,CAACC,KAAK,EAAE;EACZ,MAAM;IAAEC;EAAc,CAAC,GAAG,IAAI,CAACC,UAAU,EAAE;EAE3C,IAAI;IAAA;IACF,MAAMC,aAAa,GAAG,MAAM,IAAAC,uBAAgB,EAACH,aAAa,CAAC;IAE3D,MAAMI,MAAM,GAAG,MAAMF,aAAa,CAACG,GAAG,CAAC,IAAI,CAACC,YAAY,CAAC;IACzD,MAAMC,YAAY,4BACf,gCAAML,aAAa,CAACM,eAAe,0DAA7B,2BAAAN,aAAa,EAAmB,IAAI,CAACI,YAAY,CAAC,0EAAK,EAAE;IAElEC,YAAY,CAACE,OAAO,CAAEC,UAAU,IAAK;MACnC,IAAI,CAACC,aAAa,CAACD,UAAU,CAAC;IAChC,CAAC,CAAC;IAEF,IAAI,CAACE,QAAQ,CAAC,IAAI,EAAER,MAAM,CAAC;EAC7B,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZ,IAAI,CAACD,QAAQ,CAACC,GAAG,CAAU;EAC7B;AACF"}