{"version":3,"file":"outputCssLoader.js","names":["getCacheInstance","outputCssLoader","async","cacheProvider","getOptions","cacheInstance","result","get","resourcePath","dependencies","getDependencies","forEach","dependency","addDependency","callback","err"],"sources":["../src/outputCssLoader.ts"],"sourcesContent":["import type webpack from 'webpack';\n\nimport type { ICache } from './cache';\nimport { getCacheInstance } from './cache';\n\nexport default async function outputCssLoader(\n  this: webpack.LoaderContext<{ cacheProvider: string | ICache | undefined }>\n) {\n  this.async();\n  const { cacheProvider } = this.getOptions();\n\n  try {\n    const cacheInstance = await getCacheInstance(cacheProvider);\n\n    const result = await cacheInstance.get(this.resourcePath);\n    const dependencies =\n      (await cacheInstance.getDependencies?.(this.resourcePath)) ?? [];\n\n    dependencies.forEach((dependency) => {\n      this.addDependency(dependency);\n    });\n\n    this.callback(null, result);\n  } catch (err) {\n    this.callback(err as Error);\n  }\n}\n"],"mappings":"AAGA,SAASA,gBAAgB,QAAQ,SAAS;AAE1C,eAAe,eAAeC,eAAe,GAE3C;EACA,IAAI,CAACC,KAAK,EAAE;EACZ,MAAM;IAAEC;EAAc,CAAC,GAAG,IAAI,CAACC,UAAU,EAAE;EAE3C,IAAI;IACF,MAAMC,aAAa,GAAG,MAAML,gBAAgB,CAACG,aAAa,CAAC;IAE3D,MAAMG,MAAM,GAAG,MAAMD,aAAa,CAACE,GAAG,CAAC,IAAI,CAACC,YAAY,CAAC;IACzD,MAAMC,YAAY,GAChB,CAAC,MAAMJ,aAAa,CAACK,eAAe,GAAG,IAAI,CAACF,YAAY,CAAC,KAAK,EAAE;IAElEC,YAAY,CAACE,OAAO,CAAEC,UAAU,IAAK;MACnC,IAAI,CAACC,aAAa,CAACD,UAAU,CAAC;IAChC,CAAC,CAAC;IAEF,IAAI,CAACE,QAAQ,CAAC,IAAI,EAAER,MAAM,CAAC;EAC7B,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZ,IAAI,CAACD,QAAQ,CAACC,GAAG,CAAU;EAC7B;AACF"}