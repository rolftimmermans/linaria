{"version":3,"file":"outputCssLoader.js","names":["loaderUtils","getCacheInstance","outputCssLoader","async","cacheProvider","getOptions","cacheInstance","result","get","resourcePath","dependencies","getDependencies","forEach","dependency","addDependency","callback","err"],"sources":["../src/outputCssLoader.ts"],"sourcesContent":["import loaderUtils from 'loader-utils';\n\nimport { getCacheInstance } from './cache';\n\ntype LoaderContext = Parameters<typeof loaderUtils.getOptions>[0];\n\nexport default async function outputCssLoader(this: LoaderContext) {\n  this.async();\n  const { cacheProvider } = loaderUtils.getOptions(this) || {};\n\n  try {\n    const cacheInstance = await getCacheInstance(cacheProvider);\n\n    const result = await cacheInstance.get(this.resourcePath);\n    const dependencies =\n      (await cacheInstance.getDependencies?.(this.resourcePath)) ?? [];\n\n    dependencies.forEach((dependency) => {\n      this.addDependency(dependency);\n    });\n\n    this.callback(null, result);\n  } catch (err) {\n    this.callback(err as Error);\n  }\n}\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,cAAc;AAEtC,SAASC,gBAAgB,QAAQ,SAAS;AAI1C,eAAe,eAAeC,eAAe,GAAsB;EACjE,IAAI,CAACC,KAAK,EAAE;EACZ,MAAM;IAAEC;EAAc,CAAC,GAAGJ,WAAW,CAACK,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAE5D,IAAI;IACF,MAAMC,aAAa,GAAG,MAAML,gBAAgB,CAACG,aAAa,CAAC;IAE3D,MAAMG,MAAM,GAAG,MAAMD,aAAa,CAACE,GAAG,CAAC,IAAI,CAACC,YAAY,CAAC;IACzD,MAAMC,YAAY,GAChB,CAAC,MAAMJ,aAAa,CAACK,eAAe,GAAG,IAAI,CAACF,YAAY,CAAC,KAAK,EAAE;IAElEC,YAAY,CAACE,OAAO,CAAEC,UAAU,IAAK;MACnC,IAAI,CAACC,aAAa,CAACD,UAAU,CAAC;IAChC,CAAC,CAAC;IAEF,IAAI,CAACE,QAAQ,CAAC,IAAI,EAAER,MAAM,CAAC;EAC7B,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZ,IAAI,CAACD,QAAQ,CAACC,GAAG,CAAU;EAC7B;AACF"}